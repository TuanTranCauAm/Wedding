<!DOCTYPE html>

<html lang="vi">

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Thi·ªáp c∆∞·ªõi ‚Äì Ph∆∞∆°ng Lan & Trung Tu·∫•n</title>

    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Italianno&family=Dancing+Script&family=Be+Vietnam+Pro&display=swap"
      rel="stylesheet">
    <link rel="stylesheet" href="style.css">
  </head>

  <body>

    <!-- M√†n h√¨nh ch·ªù m·ªü thi·ªáp -->
    <div id="welcome" class="welcome-screen">
      <div class="tap-text" style="font-size: 30px;">Ch·∫°m ƒë·ªÉ m·ªü thi·ªáp</div>
    </div>

    <!-- Container trang ch√≠nh gi·ªëng h√¨nh -->
    <div class="MoBai">
      <div class="hero-overlay"></div>
      <div class="hero-content">
        <p class="hero-sub">SAVE THE DATE</p>
        <p class="hero-date"><span id="date"></span></p>
        <h1 class="hero-names"><span id="title"></span></h1>

        <!--<button class="hero-button">G·ª¨I L·ªúI CH√öC</button>-->
      </div>
    </div>

    <div class="content fade-scroll">
      <img src="./image/Doc1.JPG" alt="Cover" class="cover-img fade-in">

      <!-- L·ªùi m·ªùi -->
      <div class="invitation fade-scroll">
        <h1 class="Wedding Invitation"><br>Wedding Invitation</h1>
      </div>

      <!-- 2 b√™n gia ƒë√¨nh-->
      <div class="two-column-container fade-scroll">
        <div class="left-column">
          <strong>
            <p style="font-size: 20px;">
              <span id="groom_name"></span><br><br>
              <span id="groom_father"></span><br>
              <span id="groom_mother"></span>
            </p>
          </strong>
          <p style="font-size: 15px;"><span id="groom_address"></span></p>
        </div>

        <div class="right-column">
          <strong>
            <p style="font-size: 20px;">
              <span id="bride_name"></span><br><br>
              <span id="bride_father"></span><br>
              <span id="bride_mother"></span>
            </p>
          </strong>
          <p style="font-size: 15px;"><span id="bride_address"></span></p>
        </div>
      </div>

      <div class="text fade-in delay-1 fade-scroll">
        <p style="font-size: 20px;">Tr√¢n Tr·ªçng B√°o Tin L·ªÖ Th√†nh H√¥n C·ªßa Ch√∫ng
          T√¥i</p>
        <h2 class="title"><span id="groom"></span> <br>‚ù§Ô∏è<br> <span
            id="bride"></span></h2>
      </div>

      <div>
        <img src="./image/Ngang1.JPG" style="max-width: 80%; height: auto;">
      </div>

      <!-- Th·ªùi gian ƒë·ªãa ƒëi·ªÉm -->
      <div class="text fade-in delay-1 fade-scroll">
        <p><br></p>
        <h1 class="subtitle fade-scroll">Tr√¢n Tr·ªçng K√≠nh M·ªùi</h1>
        <div id="ten-trong-thiep" style="
        font-size: 28px;
        font-style: italic;
        color: #00c8ff;
        position: relative;
        display: inline-block;
      ">
          <!-- T√™n ng∆∞·ªùi ƒë∆∞·ª£c m·ªùi s·∫Ω ƒë∆∞·ª£c ch√®n ·ªü ƒë√¢y -->
        </div>
        <p style="font-size: 35px;">Tham d·ª± l·ªÖ th√†nh h√¥n v√†o l√∫c</p>

        <div class="venue-section">
          <div class="simple-time-grid">
            <div class="time-item"><span id="hour"></span></div>
            <div class="time-center">
              <div><span id="dayOfWeek"></span></div>
              <div class="big-day"><span id="day"></span></div>
              <div><span id="month"></span></div>
            </div>
            <div class="time-item"><span id="year"></span></div>
          </div>

          <p class="lunar-date"><span id="lunar"></span></p>

          <!--L·ªãch-->
          <div class="calendar">
            <div class="calendar-header"><span id="calendar"></span></div>
            <div class="calendar-grid">
              <div class="day-name">T.2</div>
              <div class="day-name">T.3</div>
              <div class="day-name">T.4</div>
              <div class="day-name">T.5</div>
              <div class="day-name">T.6</div>
              <div class="day-name">T.7</div>
              <div class="day-name">CN</div>

              <!-- C√°c ng√†y tr·ªëng ƒë·∫ßu th√°ng -->
              <div class="empty"></div>
              <div class="day">1</div>
              <div class="day">2</div>
              <div class="day">3</div>
              <div class="day">4</div>
              <div class="day">5</div>
              <div class="day">6</div>
              <div class="day">7</div>
              <div class="day">8</div>
              <div class="day">9</div>
              <div class="day">10</div>
              <div class="day">11</div>
              <div class="day">12</div>
              <div class="day">13</div>
              <div class="day">14</div>
              <div class="day">15</div>
              <div class="day">16</div>
              <div class="day">17</div>
              <div class="day">18</div>
              <div class="day">19</div>
              <div class="day">20</div>
              <div class="day">21</div>
              <div class="day">22</div>
              <div class="day">23</div>
              <div class="day">24</div>
              <div class="day">25</div>
              <div class="day">26</div>
              <div class="day">27</div>
              <div class="day">28</div>
              <div class="day">29</div>
              <div class="day">30</div>
              <div class="day">31</div>
            </div>
          </div>
        </div>

        <div class="Place fade-scroll">
          <h3 class="venue-title"><span id="venue_type"></span></h3>
          <h2 class="venue-name"><span id="venue_name"></span></h2>
          <p><span id="venue_address"></span></p>
          <div class="map-section">
            <a id="map-link" href="#" target="_blank" class="map-button">Xem Ch·ªâ
              ƒê∆∞·ªùng</a>

            <div class="map-embed">
              <iframe id="map-iframe" src width=100% height="300"
                style="border:0;" allowfullscreen loading="lazy"
                referrerpolicy="no-referrer-when-downgrade"></iframe>
            </div>
          </div>

        </div>

        <p class="thank-text">
          S·ª± hi·ªán di·ªán c·ªßa qu√Ω v·ªã l√† ni·ªÅm<br>
          vinh h·∫°nh cho gia ƒë√¨nh ch√∫ng t√¥i<br>
          R·∫•t h√¢n h·∫°nh ƒë∆∞·ª£c ƒë√≥n ti·∫øp!
        </p>

        <!-- Nh·∫°c n·ªÅn -->
        <audio id="bgm" src="../image/music.mp3" loop autoplay></audio>
      </div>

      <!-- X√°c nh·∫≠n tham gia -->
      <div class="form-section fade-scroll">
        <h3 class="form-title">X√°c Nh·∫≠n Tham D·ª±<br>& G·ª≠i L·ªùi Ch√∫c</h3>

        <form id="rsvp-form">
          <input type="text" name="name" placeholder="T√™n c·ªßa b·∫°n l√†?" required>
          <input type="text" name="relation" placeholder="B·∫°n l√† g√¨ c·ªßa D√¢u R·ªÉ?"
            required>
          <textarea name="message" placeholder="L·ªùi ch√∫c..."
            required></textarea>
          <select name="attendance" required>
            <option value>B·∫°n c√≥ tham d·ª± kh√¥ng?</option>
            <option value="yes">C√≥</option>
            <option value="maybe">Ch∆∞a ch·∫Øc</option>
            <option value="no">Xin l·ªói, kh√¥ng th·ªÉ ƒë·∫øn</option>
          </select>
          <button type="submit" id="submit-btn">G·ª¨I TH√îNG TIN</button>
        </form>

        <p id="form-status" style="text-align:center; margin-top:10px;"></p>
      </div>

      <div class="gallery-grid">
        <img src="./image/Doc2.JPG" alt="·∫¢nh 1">
        <img src="./image/Doc3.JPG" alt="·∫¢nh 2">
        <img src="./image/Doc4.JPG" alt="·∫¢nh 3">
        <img src="./image/Doc5.JPG" alt="·∫¢nh 4">
      </div>
    </div>

    <!-- Fotter -->
    <footer class="footer">
      <p>Ch√∫ng t√¥i r·∫•t mong ƒë∆∞·ª£c ƒë√≥n ti·∫øp b·∫°n trong ng√†y tr·ªçng ƒë·∫°i n√†y!</p>
      <p>H√£y ƒë·∫øn v√† c√πng ch√∫ng t√¥i t·∫°o n√™n nh·ªØng k·ª∑ ni·ªám ƒë·∫πp nh·∫•t.</p>
    </footer>

    <script>
        // M√†n h√¨nh m·ªü thi·ªáp
        document.getElementById('welcome').addEventListener('click', () => {
          const w = document.getElementById('welcome');
          w.classList.add('fade-out');
          setTimeout(() => w.style.display = 'none', 600);
        });

        // Fade-in n·ªôi dung
        document.addEventListener("DOMContentLoaded", () => {
          document.querySelectorAll(".fade-in").forEach(el => {
            const delay = el.classList.contains("delay-1") ? 1000 :
              el.classList.contains("delay-2") ? 2000 : 0;
            setTimeout(() => el.style.opacity = 1, delay);
          });
        });
      </script>
  </body>

</html>

<script>
  const params = new URLSearchParams(window.location.search);
  const user = params.get("nha");

  fetch(`./data/${user}.json`)
    .then(res => res.json())
    .then(data => {
      document.getElementById("title").textContent = data.title;
      document.getElementById("date").textContent = data.date;
      document.getElementById("groom").textContent = data.groom;
      document.getElementById("bride").textContent = data.bride;
      document.getElementById("groom_name").textContent = data.groom_name;
      document.getElementById("groom_father").textContent = data.groom_father;
      document.getElementById("groom_mother").textContent = data.groom_mother;
      document.getElementById("groom_address").textContent = data.groom_address;

      document.getElementById("bride_name").textContent = data.bride_name;
      document.getElementById("bride_father").textContent = data.bride_father;
      document.getElementById("bride_mother").textContent = data.bride_mother;
      document.getElementById("bride_address").textContent = data.bride_address;

      document.getElementById("hour").textContent = data.hour;
      document.getElementById("dayOfWeek").textContent = data.dayOfWeek;
      document.getElementById("day").textContent = data.day;
      document.getElementById("month").textContent = data.month;
      document.getElementById("year").textContent = data.year;
      document.getElementById("calendar").textContent = data.calendar;
      document.getElementById("lunar").textContent = data.lunar;

      document.getElementById("venue_type").textContent = data.venue_type;
      document.getElementById("venue_name").textContent = data.venue_name;
      document.getElementById("venue_address").innerHTML = data.venue_address.join("<br>");
      document.getElementById("map-link").href = data.venue_map;
      document.getElementById("map-iframe").src = data.venue_map_detail;


      const specialDay = parseInt(data.day); // v√≠ d·ª•: 15
      // T√¨m to√†n b·ªô √¥ ng√†y trong l·ªãch
      const days = document.querySelectorAll(".calendar-grid .day");

      days.forEach(dayEl => {
        const dayNumber = parseInt(dayEl.textContent.trim());
        if (dayNumber === specialDay) {
          // Th√™m class special
          dayEl.classList.add("special");

          // B·ªçc l·∫°i s·ªë ng√†y trong span
          const span = document.createElement("span");
          span.className = "heart-number";
          span.textContent = dayNumber;

          // G√°n l·∫°i n·ªôi dung
          dayEl.textContent = ""; // x√≥a n·ªôi dung c≈©
          dayEl.appendChild(span);
        }
      });
    })
    .catch(err => {
      console.error("L·ªói t·∫£i d·ªØ li·ªáu:", err);
    });

  fetch('./data/form.json')
    .then(res => res.json())
    .then(data => {
      const formUrl = data.form_url;
      console.info("Form URL:", formUrl);
      document.getElementById('rsvp-form').addEventListener('submit', function (e) {
        e.preventDefault();

        const btn = document.getElementById('submit-btn');
        const status = document.getElementById('form-status');

        // Kho√° n√∫t & hi·ªÉn th·ªã ƒëang g·ª≠i
        btn.disabled = true;
        btn.textContent = '‚è≥ ƒêang g·ª≠i...';
        status.textContent = '';

        const form = e.target;
        const dataToSend = {
          name: form.name.value,
          relation: form.relation.value,
          message: form.message.value,
          attendance: form.attendance.value
        };

        fetch(formUrl, {
          method: 'POST',
          body: JSON.stringify(dataToSend)
        })
          .then(res => res.json())
          .then(res => {
            document.getElementById('form-status').textContent = 'üéâ G·ª≠i th√†nh c√¥ng r√πi nh√©!';
            form.reset();
          })
          .catch(() => {
            document.getElementById('form-status').textContent = '‚ùå G·ª≠i th·∫•t b·∫°i. Qu√° nh·ªç cho b·∫°n!';
          });
      });
    })
    .catch(err => {
      console.error("L·ªói t·∫£i form:", err);
    });

  const ten = params.get("ten");
  if (ten) {
    document.getElementById("ten-trong-thiep").innerHTML =
      `<span style="
          position: absolute;
          left: 0;
          right: 0;
          top: 0;
          color: #9b1006;
          z-index: -1;
        "></span>${decodeURIComponent(ten)}`;
  }

  document.addEventListener("DOMContentLoaded", () => {
    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            entry.target.classList.add("visible");
            observer.unobserve(entry.target); // ch·ªâ ch·∫°y 1 l·∫ßn
          }
        });
      },
      {
        threshold: 0.1,
      }
    );

    // √Åp d·ª•ng cho t·∫•t c·∫£ ph·∫ßn c·∫ßn fade-on-scroll
    document.querySelectorAll(".fade-scroll").forEach((el) => {
      observer.observe(el);
    });
  });
</script>